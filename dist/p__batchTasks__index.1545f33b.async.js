(self["webpackChunkBeeFarmingFE"]=self["webpackChunkBeeFarmingFE"]||[]).push([[9829],{93813:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return I}});var r=t(27466),s=t(87331),a=t(43213),o=t(65184),c=t(13494),l=t(57113),i=t(76443),d=t(82005),u=t(71188),h=t(50959),p=t(66689),v=t(11527),x=(0,h.forwardRef)(((e,n)=>{var t=(0,h.useState)(),r=(0,u.Z)(t,2),s=r[0],a=r[1];return(0,h.useImperativeHandle)(n,(()=>({getContent:e=>{switch(e){case"honey-A":return null===s||void 0===s?void 0:s.editor.getModels()[0].getValue();case"hornet-A":return null===s||void 0===s?void 0:s.editor.getModels()[1].getValue();case"honey-B":return null===s||void 0===s?void 0:s.editor.getModels()[2].getValue();case"hornet-B":return null===s||void 0===s?void 0:s.editor.getModels()[3].getValue();default:return 0}}}))),(0,v.jsx)("div",{style:{position:"absolute",width:"100%",height:"100%"},children:(0,v.jsx)(p.ZP,{theme:"vs-dark",language:"java",options:{minimap:{enabled:!0},automaticLayout:!0,codeLens:!0,colorDecorators:!0,contextmenu:!0,readOnly:!1,formatOnPaste:!0,overviewRulerBorder:!1,scrollBeyondLastLine:!0,fontSize:16,language:"java"},editorDidMount:(e,n)=>a(n)})})})),m=x,f=t(28869),j=t.n(f),Z=t(18921),b=()=>{var e=(0,h.useRef)(null),n=(0,h.useState)(!1),t=(0,u.Z)(n,2),p=t[0],x=t[1],f=(0,h.useState)(!0),b=(0,u.Z)(f,2),I=b[0],y=b[1],k=(0,h.useState)({type:"honey-A"}),g=(0,u.Z)(k,2),w=g[0],N=g[1],C=(0,h.useState)({type:"hornet-A"}),B=(0,u.Z)(C,2),A=B[0],S=B[1],P=(0,h.useState)({type:"honey-B"}),H=(0,u.Z)(P,2),R=H[0],F=H[1],L=(0,h.useState)({type:"hornet-B"}),M=(0,u.Z)(L,2),T=M[0],V=M[1],O=e=>{switch(e){case"honey-A":return{codeInfo:w,setCodeInfo:N};case"honey-B":return{codeInfo:R,setCodeInfo:F};case"hornet-A":return{codeInfo:A,setCodeInfo:S};case"hornet-B":return{codeInfo:T,setCodeInfo:V}}},q=(0,h.useState)(0),E=(0,u.Z)(q,2),D=E[0],G=E[1],z=(0,h.useState)(""),Q=(0,u.Z)(z,2),U=Q[0],X=Q[1],Y=(0,h.useState)(""),_=(0,u.Z)(Y,2),J=_[0],K=_[1],W=function(){var n=(0,d.Z)((0,l.Z)().mark((function n(t){var r,s,a,o,c,d,u,h;return(0,l.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(n.prev=0,s=null===(r=e.current)||void 0===r?void 0:r.getContent(t),""!==s){n.next=5;break}return i.default.error("\u8bf7\u5148\u8f93\u5165\u4ee3\u7801\uff01"),n.abrupt("return");case 5:return a=O(t),o=a.codeInfo,c=a.setCodeInfo,d=(null===o||void 0===o?void 0:o.codeId)||void 0,n.next=9,(0,Z.lQ)({type:t,codeId:d,content:s});case 9:u=n.sent,h=u.codeId,c({type:t,codeId:h,content:s}),i.default.success("\u4e0a\u4f20\u6210\u529f\uff01"),n.next=18;break;case 15:n.prev=15,n.t0=n["catch"](0),console.error(n.t0);case 18:case"end":return n.stop()}}),n,null,[[0,15]])})));return function(e){return n.apply(this,arguments)}}(),$=function(){var e=(0,d.Z)((0,l.Z)().mark((function e(n){var t;return(0,l.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,Z.XZ)({batchTaskId:n});case 3:if(t=e.sent,console.log(t),2!==t.status&&3!==t.status){e.next=9;break}return e.abrupt("return",!1);case 9:return e.abrupt("return",!0);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(n){return e.apply(this,arguments)}}(),ee=function(){var e=(0,d.Z)((0,l.Z)().mark((function e(n){var t,r,s,a,o,c,u,h,p;return(0,l.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=n.name,r=n.timeout,s=void 0===r?1:r,a=n.totalRounds,o=void 0===a?5:a,e.prev=1,null!==w&&void 0!==w&&w.codeId&&null!==A&&void 0!==A&&A.codeId&&null!==R&&void 0!==R&&R.codeId&&null!==T&&void 0!==T&&T.codeId){e.next=7;break}return i.default.error("\u8bf7\u5148\u4e0a\u4f20\u4ee3\u7801\uff01"),e.abrupt("return");case 7:return c={codeIdAHoney:null===w||void 0===w?void 0:w.codeId,codeIdAHornet:null===A||void 0===A?void 0:A.codeId,codeIdBHoney:null===R||void 0===R?void 0:R.codeId,codeIdBHornet:null===T||void 0===T?void 0:T.codeId,name:t,totalRounds:o,timeout:s},e.next=10,(0,Z._5)(c);case 10:u=e.sent,G(u.id),h=u.id,x(!0),p=setInterval((0,d.Z)((0,l.Z)().mark((function e(){var n;return(0,l.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,$(h);case 2:if(n=e.sent,n){e.next=9;break}return clearInterval(p),x(!1),e.next=8,te(h);case 8:y(!1);case 9:case"end":return e.stop()}}),e)}))),1e3);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](1),console.error(e.t0);case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(n){return e.apply(this,arguments)}}(),ne=function(){var e=(0,d.Z)((0,l.Z)().mark((function e(){return(0,l.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,Z.UY)({batchTaskId:D});case 3:x(!1),e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=(0,d.Z)((0,l.Z)().mark((function e(n){var t;return(0,l.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,Z.bE)({batchTaskId:n});case 3:t=e.sent,console.log(t),X(t.upperGoals),K(t.lowerGoals),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n){return e.apply(this,arguments)}}();return(0,v.jsxs)("div",{className:"bt",children:[(0,v.jsx)(j(),{isOpen:p,overlayClassName:"overlay",className:"content",ariaHideApp:!1,children:(0,v.jsx)("div",{className:"bg",children:(0,v.jsxs)("div",{className:"box",children:[(0,v.jsx)(c.Z,{tip:"Loading"}),(0,v.jsx)(o.ZP,{onClick:()=>ne(),className:"cancel",children:"\u53d6\u6d88\u8fd0\u884c"})]})})}),(0,v.jsx)(j(),{isOpen:!I,overlayClassName:"overlay",className:"content",ariaHideApp:!1,children:(0,v.jsx)("div",{className:"bg",children:(0,v.jsxs)("div",{className:"box",children:[(0,v.jsxs)(a.Z,{title:"\u8fd0\u884c\u7ed3\u679c",bordered:!0,column:1,children:[(0,v.jsx)(a.Z.Item,{label:"\u4e0a\u534a\u573a",children:U}),(0,v.jsx)(a.Z.Item,{label:"\u4e0b\u534a\u573a",children:J})]}),(0,v.jsx)(o.ZP,{type:"primary",onClick:()=>y(!0),children:"\u5173\u95ed\u7a97\u53e3"})]})})}),(0,v.jsxs)("div",{className:"bt-editor",children:[(0,v.jsxs)("div",{className:"bt-editor-left",children:[(0,v.jsxs)("div",{className:"honeyA",children:[(0,v.jsx)(o.ZP,{className:"upload",onClick:()=>W("honey-A"),children:"\u4e0a\u4f20"}),(0,v.jsx)(m,{ref:e})]}),(0,v.jsxs)("div",{className:"tooltip",children:[(0,v.jsx)("span",{children:"\u73a9\u5bb6A\u871c\u8702\u4ee3\u7801"}),(0,v.jsx)("span",{children:"\u73a9\u5bb6A\u9ec4\u8702\u4ee3\u7801"})]}),(0,v.jsxs)("div",{className:"hornetA",children:[(0,v.jsx)(o.ZP,{className:"upload",onClick:()=>W("hornet-A"),children:"\u4e0a\u4f20"}),(0,v.jsx)(m,{ref:e})]})]}),(0,v.jsxs)("div",{className:"settings",children:[(0,v.jsx)("div",{className:"st-header",children:"\u53c2\u6570\u8bbe\u7f6e"}),(0,v.jsxs)(r.Z,{labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!0,timeout:1,totalRounds:5,name:"\u4e00\u6b21\u65b0\u7684\u4efb\u52a1"},onFinish:ee,autoComplete:"off",className:"batchTask-form",children:[(0,v.jsx)(r.Z.Item,{label:"\u4efb\u52a1\u540d\u79f0",name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4efb\u52a1\u540d\u79f0"}],children:(0,v.jsx)(s.Z,{})}),(0,v.jsx)(r.Z.Item,{label:"\u8fd0\u884c\u603b\u8f6e\u6570",name:"totalRounds",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8fd0\u884c\u603b\u8f6e\u6570"}],children:(0,v.jsx)(s.Z,{})}),(0,v.jsx)(r.Z.Item,{label:"\u8d85\u65f6\u65f6\u95f4",name:"timeout",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8d85\u65f6\u65f6\u95f4"}],children:(0,v.jsx)(s.Z,{})}),(0,v.jsx)(r.Z.Item,{wrapperCol:{offset:8,span:16},noStyle:!0,children:(0,v.jsx)(o.ZP,{className:"runBtn",type:"primary",htmlType:"submit",children:"\u8fd0\u884c"})})]})]}),(0,v.jsxs)("div",{className:"bt-editor-right",children:[(0,v.jsxs)("div",{className:"honeyB",children:[(0,v.jsx)(o.ZP,{className:"upload",onClick:()=>W("honey-B"),children:"\u4e0a\u4f20"}),(0,v.jsx)(m,{ref:e})]}),(0,v.jsxs)("div",{className:"tooltip",children:[(0,v.jsx)("span",{children:"\u73a9\u5bb6B\u871c\u8702\u4ee3\u7801"}),(0,v.jsx)("span",{children:"\u73a9\u5bb6B\u9ec4\u8702\u4ee3\u7801"})]}),(0,v.jsxs)("div",{className:"hornetB",children:[(0,v.jsx)(o.ZP,{className:"upload",onClick:()=>W("hornet-B"),children:"\u4e0a\u4f20"}),(0,v.jsx)(m,{ref:e})]})]})]})]})},I=b}}]);